# 数据库设计

## 上链数据库设计

### 用户部分

#### 消费者账户表 

| 名称            | 字段     | 字段备注    | 备注                | Null |
| --------------- | -------- | ----------- | ------------------- | ---- |
| accountId       | string   | varchar(50) | 消费者id，全局唯一  | N    |
| discountList    | string[] |             | 优惠卷id List       |      |
| commodityIdList | string[] |             | 所拥有的商品id List | N    |
| balance         | Int64    |             | 余额，单位：分      | N    |
| lastModified    | string   |             | 上次更新时间        | N    |

#### 商户账户表

| 名称            | 字段     | 字段备注    | 备注               | Null |
| --------------- | -------- | ----------- | ------------------ | ---- |
| bussinessId     | string   | varchar(50) | 商户Id,全局唯一    | N    |
| commodityIdList | string[] |             | 商品Id List        | N    |
| balance         | Int64    |             | 余额，单位：分     | N    |
| discountList    | string[] |             | 商家所派发的优惠卷 | N    |
| lastModified    | string   |             | 上次更新时间       |      |

#### 商品表

| 名称        | 字段   | 字段备注    | 备注             | Null |
| ----------- | ------ | ----------- | ---------------- | ---- |
| commodityId | string | varchar(50) | 商品Id，全局唯一 | N    |
| name        | string | varchar(50) | 商品名称         | N    |
| price       | Int64  |             | 价格             |      |
| ownerId     | string | varchar(50) | 所属人id         | N    |
| time        | string |             | 上架日期，时间戳 | N    |

#### 交易表



#### 优惠卷表

| 名称       | 字段   | 字段备注    | 备注                     | Null |
| ---------- | ------ | ----------- | ------------------------ | ---- |
| discountId | string | varchar(50) | 优惠卷id，全局唯一       | N    |
| name       | string | varchar(50) | 优惠卷名称               | N    |
| accountId  | string | varchar(50) | 该优惠卷所属账户Id       | N    |
| businessId | string | varchar(50) | 派发该优惠卷的商户的Id   | N    |
| beginTime  | string | varchar(50) | 开始有效时间，时间戳格式 | N    |
| endTime    | string | varchar(50) | 结束时间，时间戳格式     | N    |
| valid      | Bool   |             | 有效标识                 | N    |



## 链下数据库设计

### 用户部分

| 名称     | 字段备注 | 字段备注    | 备注               | Null |
| -------- | -------- | ----------- | ------------------ | ---- |
| userId   | string   | varchar(50) | 消费者id，全局唯一 | N    |
| userName | string   | varchar(50) | 用户名             | N    |
| phone    | string   | varchar(50) | 电话号码           | N    |
| email    | string   | varchar(50) | 邮箱账号           | N    |
| password | string   | varchar(50) | 密码，需加密       | N    |

